Implementar servi√ßos bases utilizados em todas integra√ß√µes:
*   Criar StockServicesClient
    *   √â a classe que sabe bater na API graphQL do stock-services, sabe montar a query e variables e fazer a requisi√ß√£o http
    Observa√ß√µes
    -----------
    API do stock-services √© seguinte:  
    produ√ß√£o: [https://stock-services.quero.space/graphql](https://stock-services.quero.space/graphql)  
    homolog: [https://stock-services-homolog.quero.space/graphql](https://stock-services-homolog.quero.space/graphql)

A query a ser chamada na api √© a getOffers(), passando como parametro o offerIds[] com o offerId, tamb√©m deve passar o enabled:true e restricted:false.
    
*   Criar OffersServices
    *   Recebe um offer_id para buscar a oferta na api graphQL atrav√©s do StockServicesClient, retorna um objeto com: offer_Id, metadata, que s√£o campos da oferta.
    
*   Criar o EventService
    *   Esse servi√ßo deve ser respons√°vel por montar os eventos que v√£o para o mundo externo da aplica√ß√£o via Kafka, chamando assim o KafkaProducer e mandando mensagem. A principio esse servi√ßo ter√° apenas um m√©todo: event\_subscription\_sent, que deve receber como argumento um hash de payload e enviar esse payload para o t√≥pico `anubis.event.subscription.sent`
    

Diagrama relevante da solu√ß√£o:
------------------------------

[![Image](https://private-user-images.githubusercontent.com/81271031/498536377-7f789bb7-243d-4cda-b7f6-7f2f10af4c44.png?jwt=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3NTk4NzEwMjcsIm5iZiI6MTc1OTg3MDcyNywicGF0aCI6Ii84MTI3MTAzMS80OTg1MzYzNzctN2Y3ODliYjctMjQzZC00Y2RhLWI3ZjYtN2YyZjEwYWY0YzQ0LnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNTEwMDclMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjUxMDA3VDIwNTg0N1omWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTg4NTI0N2EwODQ4OGEzYzQ5NGQ1MTM4Y2U2YmEyMzM0NmMzMmY3MmZjODNiNjNmNjQ0ODY2MmY1NzNhOWNkOTgmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0In0.U25pEpeElKETOQdeSRTYULm2IySn8KL4WBzrTdMPBEY)](https://private-user-images.githubusercontent.com/81271031/498536377-7f789bb7-243d-4cda-b7f6-7f2f10af4c44.png?jwt=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3NTk4NzEwMjcsIm5iZiI6MTc1OTg3MDcyNywicGF0aCI6Ii84MTI3MTAzMS80OTg1MzYzNzctN2Y3ODliYjctMjQzZC00Y2RhLWI3ZjYtN2YyZjEwYWY0YzQ0LnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNTEwMDclMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjUxMDA3VDIwNTg0N1omWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTg4NTI0N2EwODQ4OGEzYzQ5NGQ1MTM4Y2U2YmEyMzM0NmMzMmY3MmZjODNiNjNmNjQ0ODY2MmY1NzNhOWNkOTgmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0In0.U25pEpeElKETOQdeSRTYULm2IySn8KL4WBzrTdMPBEY)

---

## üìã Issue Summary & Analysis

### üéØ **Issue Title**: 
**Implementar servi√ßos bases utilizados em todas integra√ß√µes** *(Implement base services used in all integrations)*

### üìù **Detailed Analysis**:

This issue requests the implementation of three foundational services that will be used across all integrations in the Anubis project:

#### 1. üîå **StockServicesClient**
- **Purpose**: Class responsible for hitting the stock-services GraphQL API
- **Functionality**: 
  - Knows how to build queries and variables
  - Makes HTTP requests to the GraphQL endpoint
- **API Endpoints**:
  - **Production**: `https://stock-services.quero.space/graphql`
  - **Staging**: `https://stock-services-homolog.quero.space/graphql`
- **Query Requirements**: 
  - Call `getOffers()` method
  - Pass `offerIds[]` parameter with the `offerId`
  - Include `enabled: true` and `restricted: false`

#### 2. üé™ **OffersServices**
- **Purpose**: Service to fetch offer data through the StockServicesClient
- **Input**: Receives an `offer_id`
- **Process**: Queries the GraphQL API via StockServicesClient
- **Output**: Returns an object containing:
  - `offer_id`
  - `metadata` (offer fields)

#### 3. üì® **EventService**
- **Purpose**: Responsible for building events that go to the external world via Kafka
- **Functionality**: Calls KafkaProducer to send messages
- **Initial Method**: `event_subscription_sent`
  - **Input**: Hash payload
  - **Action**: Sends payload to Kafka topic `anubis.event.subscription.sent`

### üîó **Architecture Context**:
The issue includes a diagram showing the relevant solution architecture (requires authentication to view the GitHub image).

### üí° **Key Insights & Implementation Notes**:

1. **üöÄ Kafka Integration**: The `EventService` aligns perfectly with the `Anubis::SubscriptionEventPublisher` pattern documented in the Kafka implementation guide

2. **üìä Topic Structure**: The topic `anubis.event.subscription.sent` matches the topic structure defined in the Kafka guide: `anubis.subscriptions.sent`

3. **üèóÔ∏è Service Architecture**: Implements a layered services approach:
   - **Data Layer**: StockServicesClient (GraphQL API interaction)
   - **Business Layer**: OffersServices (data processing and transformation)
   - **Event Layer**: EventService (Kafka event publishing)

4. **üîß External Dependencies**: 
   - GraphQL client for stock-services API
   - Kafka producer for event publishing
   - HTTP client for API requests

### üìã **Implementation Priority**:
This issue provides concrete requirements for implementing the foundational services that will integrate with the Kafka-based event system. These services should be implemented as base classes that can be extended for specific integrations.

### üéØ **Related Documentation**:
- See `/docs/kafka-implementation-guide.md` for detailed Kafka implementation patterns
- The EventService implementation should follow the publisher patterns defined in the guide
- Consider implementing these services using the singleton pattern for the EventService to ensure consistent Kafka connection management

**Status**: Ready for implementation
**Priority**: High (foundational services)
**Dependencies**: Kafka setup, GraphQL client gem, HTTP client gem

